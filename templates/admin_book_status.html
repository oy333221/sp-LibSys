{% extends "base.html" %}

{% block content %}
<h2>書籍狀態列表</h2>

<table class="table table-responsive-card">
    <thead>
        <tr>
            <th>書名</th>
            <th>擁有者</th>
            <th>目前狀態</th>
            <th>借閱者</th>
        </tr>
    </thead>
    <tbody>
        {% for book in books %}
        <tr>
            <td data-label="書名">{{ book.title }}</td>
            <td data-label="擁有者">
                {{ book.owner.name }}<br>
                <small class="text-muted">{{ book.owner.phone }}</small>
            </td>
            <td data-label="目前狀態">
                <span class="badge badge-{{ 
                    'success' if book.current_status == '可借閱' 
                    else 'warning' if book.current_status in ['待處理', '已準備']
                    else 'info' if book.current_status == '已取書'
                    else 'secondary' 
                }}">
                    {{ book.current_status }}
                </span><br>
                <small class="text-muted">{{ book.status_description }}</small>
            </td>
            <td data-label="借閱者">
                {% if book.borrower_name != '-' %}
                    {{ book.borrower_name }}<br>
                    <small class="text-muted">{{ book.borrower_phone }}</small>
                {% else %}
                    -
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<div class="card mt-4">
    <div class="card-body">
        <h4 class="card-title">狀態說明</h4>
        <ul class="list-unstyled mb-0">
            <li class="mb-2"><span class="badge badge-success">可借閱</span> 在架上可借閱</li>
            <li class="mb-2"><span class="badge badge-warning">待處理</span> 已申請借閱，待管理員放入書袋</li>
            <li class="mb-2"><span class="badge badge-warning">已準備</span> 已放入書袋，待用戶取書</li>
            <li class="mb-2"><span class="badge badge-info">已取書</span> 用戶已取出，待歸還</li>
        </ul>
    </div>
</div>
{% endblock %}